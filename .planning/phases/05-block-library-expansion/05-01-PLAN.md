---
phase: 05-block-library-expansion
type: execute
---

<objective>
Add FAQ and Stats block types to complete the landing page block library.

Purpose: Provide editors with the common block types needed to build real paid-search landing pages (FAQs for SEO/trust, stats for social proof).
Output: Pages and ReusableBlocks collections with FAQ and Stats blocks, integration tests passing.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@dev/collections/Pages.ts
@dev/collections/ReusableBlocks.ts
@dev/int.spec.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add FAQ and Stats blocks to Pages and ReusableBlocks</name>
  <files>dev/collections/Pages.ts, dev/collections/ReusableBlocks.ts</files>
  <action>
Add two new block types following the established patterns (accordionBlock, contentBlock):

**FAQ Block (`faqBlock`):**
- Add to `content` blocks array in Pages.ts
- Add to `block` blocks array in ReusableBlocks.ts
- Add 'FAQ' option to blockType select in ReusableBlocks.ts
- Structure: array of items with `question` (text, required) and `answer` (richText with lexicalEditor)
- Similar pattern to accordionBlock but with semantic field names

**Stats Block (`statsBlock`):**
- Add to `content` blocks array in Pages.ts
- Add to `block` blocks array in ReusableBlocks.ts
- Add 'Stats' option to blockType select in ReusableBlocks.ts
- Structure: array of items with:
  - `value` (text, required) - the number/metric e.g. "99%", "10M+"
  - `label` (text, required) - describes the stat e.g. "Customer Satisfaction"
  - `icon` (text) - optional icon name/identifier

Follow existing conventions:
- No semicolons
- Single quotes
- Inline block definitions (not extracted to separate files)
  </action>
  <verify>pnpm generate:types succeeds with no errors, pnpm lint passes</verify>
  <done>FAQ and Stats blocks exist in both collections, types generated, lint clean</done>
</task>

<task type="auto">
  <name>Task 2: Add integration tests for FAQ and Stats blocks</name>
  <files>dev/int.spec.ts</files>
  <action>
Add integration tests for the new block types following the existing pattern in the Pages describe block:

**FAQ Block test:**
- Create a page with a faqBlock in content section
- Include at least 2 FAQ items with question/answer
- Verify creation succeeds and data structure is correct

**Stats Block test:**
- Create a page with a statsBlock in content section
- Include at least 2 stat items with value/label/icon
- Verify creation succeeds and data structure is correct

**ReusableBlocks tests:**
- Create a reusable block with blockType: 'faq' and faqBlock
- Create a reusable block with blockType: 'stats' and statsBlock
- Verify both succeed

Follow existing test patterns:
- Use `payload.create()` with collection and data
- Assert with `expect().toBe()` / `expect().toBeDefined()`
- Group in appropriate describe blocks
  </action>
  <verify>pnpm test:int passes all tests including new FAQ and Stats tests</verify>
  <done>4+ new integration tests pass (2 Pages tests + 2 ReusableBlocks tests minimum)</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `pnpm generate:types` succeeds
- [ ] `pnpm lint` passes with no errors
- [ ] `pnpm test:int` passes all tests (existing + new)
- [ ] FAQ block works in both Pages and ReusableBlocks
- [ ] Stats block works in both Pages and ReusableBlocks
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- 4+ new integration tests pass
- FAQ and Stats blocks available in Pages content section
- FAQ and Stats blocks available as ReusableBlocks types
</success_criteria>

<output>
After completion, create `.planning/phases/05-block-library-expansion/05-01-SUMMARY.md`:

# Phase 5 Plan 1: Block Library Expansion Summary

**[Substantive one-liner]**

## Performance

- **Duration:** X min
- **Started:** [timestamp]
- **Completed:** [timestamp]
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments

- Added FAQ block type with question/answer pairs
- Added Stats block type with value/label/icon structure
- X new integration tests pass

## Files Created/Modified

- `dev/collections/Pages.ts` - Added faqBlock and statsBlock to content
- `dev/collections/ReusableBlocks.ts` - Added FAQ/Stats blocks and select options
- `dev/int.spec.ts` - Added integration tests for new block types

## Decisions Made

[Any decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 5 complete, ready for Phase 6 (Block Settings + Stable IDs)
</output>
