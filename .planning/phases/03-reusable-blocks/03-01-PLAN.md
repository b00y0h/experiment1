---
phase: 03-reusable-blocks
plan: 01
type: execute
---

<objective>
Create a reusable blocks library collection and integrate it with the Page collection via a block reference field.

Purpose: Enable content editors to create blocks once and reuse them across multiple pages, reducing duplication and ensuring consistency.
Output: ReusableBlocks collection with block types, and a reference block in Page content section that links to library blocks.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/02-block-types/02-01-SUMMARY.md
@dev/collections/Pages.ts
@dev/payload.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ReusableBlocks collection</name>
  <files>dev/collections/ReusableBlocks.ts, dev/payload.config.ts</files>
  <action>
Create a new ReusableBlocks collection with:
- slug: 'reusable-blocks'
- admin.useAsTitle: 'title'
- Fields:
  - title (text, required) - human-readable name for the block
  - blockType (select, required) - which block type this is: 'accordion' | 'content' | 'footer'
  - block (blocks field with maxRows: 1) - contains the actual block definition, includes accordionBlock, contentBlock, footerBlock from Pages.ts patterns

The block field should use the same block definitions as Pages.ts content/footer sections for consistency. Extract the block definitions to avoid duplication - create inline blocks matching the existing patterns.

Register the collection in payload.config.ts by adding to the collections array.
  </action>
  <verify>pnpm generate:types && pnpm lint:fix passes, ReusableBlock type appears in payload-types.ts</verify>
  <done>ReusableBlocks collection exists with title, blockType select, and block field containing block options</done>
</task>

<task type="auto">
  <name>Task 2: Add reusable block reference to Page content section</name>
  <files>dev/collections/Pages.ts</files>
  <action>
Add a new block type 'reusableBlockRef' to the Page content section's blocks array:
- slug: 'reusableBlockRef'
- fields:
  - block (relationship field to 'reusable-blocks' collection, required)

This allows editors to insert a reference to a library block within the page content flow. The reference block sits alongside inline blocks (contentBlock, accordionBlock) in the content section.

Do NOT add to hero section (hero should remain a single inline block). Do NOT add to footer section for now (keep simple).
  </action>
  <verify>pnpm generate:types && pnpm lint:fix passes, Page type includes ReusableBlockRefBlock in content union</verify>
  <done>Page content section accepts reusableBlockRef blocks that reference the reusable-blocks collection</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `pnpm generate:types` succeeds
- [ ] `pnpm lint:fix` passes
- [ ] ReusableBlocks collection type exists in payload-types.ts
- [ ] Page content type includes reusableBlockRef option
- [ ] No TypeScript errors
</verification>

<success_criteria>

- ReusableBlocks collection created with title, blockType, and block fields
- Page content section accepts reusableBlockRef blocks
- All type generation succeeds
- Phase 3 complete, ready for Phase 4: Integration
</success_criteria>

<output>
After completion, create `.planning/phases/03-reusable-blocks/03-01-SUMMARY.md`:

# Phase 3 Plan 1: Reusable Blocks Summary

**[Substantive one-liner]**

## Performance

- **Duration:** X min
- **Started:** [timestamp]
- **Completed:** [timestamp]
- **Tasks:** 2
- **Files modified:** X

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Deviations from Plan

[Any deviations, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

- [Status for Phase 4: Integration]

---
*Phase: 03-reusable-blocks*
*Completed: [date]*
</output>
